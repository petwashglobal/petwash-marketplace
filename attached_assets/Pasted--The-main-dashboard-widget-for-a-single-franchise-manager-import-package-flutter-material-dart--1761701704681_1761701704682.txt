// The main dashboard widget for a single franchise manager
import 'package:flutter/material.dart';

class FranchiseDashboard extends StatelessWidget {
  // Dart object representing the current hub/location data
  final FranchiseHub hubData; 

  const FranchiseDashboard({required this.hubData});

  @override
  Widget build(BuildContext context) {
    // 1. Secured & Stable UI Structure (Scaffold)
    return Scaffold(
      appBar: AppBar(
        title: Text('${hubData.name} Hub Management üê∂', // Dynamic Title
            style: const TextStyle(fontWeight: FontWeight.bold)),
        backgroundColor: Colors.blueGrey, // Elegant color
        actions: [
          // 2. Global Integration: Timezone/Location Status
          Icon(Icons.access_time),
          Padding(
            padding: EdgeInsets.symmetric(horizontal: 8.0),
            child: Text(hubData.timezone, style: TextStyle(fontSize: 16)),
          ),
        ],
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: <Widget>[
            // 3. Smart, Pretty UI Component: Key Performance Indicator (KPI) Card
            _buildKpiCard(
              title: 'Total Revenue (Today)',
              value: '${hubData.currencySymbol} ${hubData.dailyRevenue.toStringAsFixed(2)}',
              icon: Icons.attach_money,
              color: Colors.green.shade700,
            ),
            const SizedBox(height: 20),

            // 4. Franchise-Specific Feature: Queue/Availability Status
            Text('Current Wash Queue', style: Theme.of(context).textTheme.headline6),
            const SizedBox(height: 10),
            Text('Pets In Progress: ${hubData.petsInProgress} / ${hubData.maxCapacity}', 
                style: TextStyle(fontSize: 16, color: hubData.isFull ? Colors.red : Colors.blue)),
            
            // ... More sections for Staff Management, Inventory, etc.
          ],
        ),
      ),
    );
  }

  // Helper function to create the elegant KPI Card (Reusable component)
  Widget _buildKpiCard({required String title, required String value, required IconData icon, required Color color}) {
    return Card(
      elevation: 4, // Soft shadow for a premium feel
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
      child: ListTile(
        leading: Icon(icon, color: color, size: 36),
        title: Text(title, style: TextStyle(fontWeight: FontWeight.w600)),
        subtitle: Text(value, style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold, color: color)),
      ),
    );
  }
}

// Conceptual Data Model (Used for the Hub)
class FranchiseHub {
  final String name;
  final String timezone;
  final String currencySymbol; // Crucial for Israel/Global
  final double dailyRevenue;
  final int petsInProgress;
  final int maxCapacity;

  bool get isFull => petsInProgress >= maxCapacity;

  const FranchiseHub({
    required this.name,
    required this.timezone,
    required this.currencySymbol,
    required this.dailyRevenue,
    required this.petsInProgress,
    required this.maxCapacity,
  });
}
