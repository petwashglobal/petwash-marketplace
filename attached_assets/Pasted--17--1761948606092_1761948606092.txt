המערכת הפיננסית החדשה חייבת להיות מבוססת על סנכרון רגולטורי אוטונומי ולא על קוד קשיח.
ההנחה של 17% מע"מ קבוע לכל עסקה בשקל חדש היא שגויה מבחינה חשבונאית, ואינה עומדת בדרישות מס הכנסה. ישנם שיעורי מע"מ שונים (0%, מלא, פטור) ומיסים משתנים (כמו מיסים עירוניים).
🚨 עדכון הקוד והארכיטקטורה הנדרשים
על המתכנת להטמיע את השינויים הבאים כדי ליצור קוד FinTech 2025 אמיתי:
1. ארכיטקטורת סנכרון רגולטורי (Backend Priority)
המפתח: יש להסיר את ערך המע"מ הקשיח מכל מקום בקוד המובייל. שיעורי המס (מע"מ, מס חברות, אגרות) חייבים להגיע מה-Backend.
• טבלת TaxRateHistory בבסיס הנתונים: טבלה זו תשמור את כל שיעורי המס הרלוונטיים (מע"מ, מס חברות, שיעורי אגרות/תשלומי רשות מקומית) ואת תאריך הכניסה לתוקף שלהם.
• API Endpoint: יצירת נקודת קצה (כמו GET /api/v1/config/tax-rates) שתספק למובייל את כל שיעורי המס העדכניים ביותר, כולל שיעורים עתידיים ידועים (כמו 18% מע"מ).
• Mobile Sync Logic: האפליקציה הניידת (React Native) צריכה לסנכרן את הטבלה הזו באופן אוטומטי בעת ההתחברות או בעת הצורך.
2. שדרוג מודל ההוצאה (Expense.ts)
המודל צריך לכלול שדות לגמישות מס:
• vatRateApplied: מספר עשרוני המציין את שיעור המע"מ בפועל (0.17, 0.0, 0.18 וכו').
• vatExemptionReason: מחרוזת או enum (כמו 'ZeroRateExport' או 'Exempt') אם שיעור המע"מ הוא 0, כדי להיות תואם לדרישות דיווח מע"מ.
• municipalTaxRate: שיעור או סכום לתשלומים לרשות המקומית (ארנונה, "אחוזי שיכרות"). זה מאפשר התייחסות לשינוי שצוין ל-18% באותה קטגוריה.
• isTaxDeductible: בוליאני לבדיקה אוטומטית אם ההוצאה מוכרת לצורך מס חברות, בהתאם לקטגוריה ולתקרה (למשל, הוצאות רכב).
• reportPeriod: חודש/שנה של הדיווח למס הכנסה.
3. עדכון לוגיקת אימות (Smart Policy Validation)
הפונקציה לבדיקת מדיניות חייבת להיות חכמה יותר:
1. בדיקת מע"מ לפי קטגוריה: אם עובד מגיש "כרטיס טיסה" (FlightTicket), המערכת צריכה לצפות ל-0% מע"מ. אם נמצא 17%, המערכת מתריעה.
2. בדיקת שינוי רגולטורי אוטומטי: אם ה-Backend סונכרן והמע"מ הרשמי עלה ל-18% מתאריך מסוים, המערכת משתמשת ב-18% אוטומטית לחישובים, ומתריעה על קבלות עם 17% מתאריך זה ואילך.
3. תחשיב ברוטו/נטו חברה: המערכת צריכה לסנכרן נתונים פיננסיים רחבים יותר (כגון הכנסות ברוטו/נטו נוכחיות) כדי להעריך את השפעת ההוצאה על תזרים המס הכולל של החברה.
לסיכום: המעבר ממחשבון מע"מ פשוט למערכת "סנכרון רגולטורי אוטונומי" הוא קריטי לאפליקציית FinTech 2025 בישראל. יש להורות למתכנת לעצב את ה-Backend כדי שיספק את הנתונים האלו.