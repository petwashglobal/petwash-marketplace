ארכיטקטורת מערכת מלאה 2025: אימות, הנחות ומועדון לקוחות
המערכת שלך היא מערכת מורכבת של ניהול זהויות (Identity Management) ולוגיקת תמחור דינמית הנדרשת עבור מועדון לקוחות רב-שכבתי. הפתרון הטכנולוגי הטוב ביותר ב-2025 הוא שילוב של Google Identity Platform עם מודול ייעודי ב-Backend API (NestJS/FastAPI).
I. ניהול זהויות ואימות מתקדם באמצעות Google
אנו ממנפים את שירותי Google Cloud כדי להבטיח את האבטחה והאוטומציה המלאה של תהליכי האימות הדו-כיווניים והביומטריים.
• אימות דו-כיווני ורב-שלבי (MFA): המערכת משתמשת ב-Google Identity Platform כדי לאפשר למשתמשים להירשם באמצעות מספר אמצעי אימות (אימייל, טלפון, Sign In with Google). עבור כל כניסה רגישה או שינוי פרטים, המערכת דורשת אימות דו-כיווני (כגון קוד לנייד או אימות ביומטרי).
• אימות ביומטרי לזיהוי: עבור קבוצות רגישות כמו "נכים מאושרים" או עסקאות חשבונאיות, המערכת משלבת אימות ביומטרי. זה מושג באמצעות טכנולוגיות כגון Passkeys (מאפשרות שימוש בזיהוי פנים או טביעת אצבע במכשיר המשתמש) או שילוב עם שירותי Zero-Knowledge Proof (ZKP) שמתמחים באימות מסמכי זהות ממשלתיים באופן מאובטח ופרטי, בהתאם למגבלות הביומטריות שהוגדרו (מדינות נבחרות). זה עונה על דרישת הצילום חובה והצורך באמצעי הכי בטיחותי.
• אוטומציה מלאה ו-AI לאימות תעודות: תהליך אישור "נכים מאושרים" הוא אוטומטי. המשתמש מעלה את תעודת הנכות הממשלתית (הכוללת תמונה). שירות Google Vision AI מנתח את התמונה: 1. זיהוי אובייקטים (OCR) מוודא שמדובר במסמך ממשלתי רשמי. 2. המערכת מבצעת השוואת פנים (Face Match) בין תמונת הפנים בתעודה לבין תמונת סלפי עדכנית שצולמה בזמן אמת באפליקציה (בהסכמת המשתמש).
• מניעת כפילויות חשבון: ה-Identity Platform אוכף ייחודיות ברמת המזהים הראשיים (מספר טלפון ואימייל). כל ניסיון ליצור חשבון נוסף עם אחד המזהים הללו ייחסם אוטומטית.
II. 💰 לוגיקת הנחות דינמית ומודול מועדון לקוחות
מודול התמחור הוא דינמי ומנוהל על ידי פונקציית תמחור חכמה ב-Backend API שתלויה בקבוצת החברות של המשתמש.
א. מועדון לקוחות רגיל (Loyalty Club):
• תנאי: הרישום חינם ומותנה באימות זהות בסיסי (אימייל/טלפון).
• הטבה קבועה: החברים מקבלים 5% הנחה קבועה על כל שטיפה (בסיסית, חבילה או מנוי חודשי), כל עוד הם מוגדרים כחברים פעילים. הנחה זו מוטמעת ישירות בפונקציית התמחור ב-Backend.
• e-Gift Card: אין הנחה על רכישת כרטיסי מתנה אלקטרוניים, מה שמפשט את לוגיקת החשבונאות.
ב. קבוצת "נכים מאושרים" (Verified Discount Group):
• הטבה משתנה: רמת ההנחה לקבוצה זו ניתנת לשינוי לאורך זמן על ידי מנהל המערכת דרך פאנל הניהול. היא נשמרת בבסיס הנתונים (PostgreSQL) כמשתנה (למשל, discount_rate_certified_disabled = 0.15 עבור 15% הנחה).
• תנאים מיוחדים: ההנחה ניתנת רק לאחר השלמת תהליך האימות המלא (כולל ביומטריה/השוואת תעודה והסכמה לתנאים) ואישור אדמיניסטרטיבי.
• איסור כפילויות/שימוש משותף: המערכת תבצע בדיקת זהות לפני כל שימוש בהנחה כדי לוודא שאין כפילות או שימוש על ידי חשבון שאינו המשתמש המאושר.
קוד לוגיקה דינמית (Node.js Backend Concept):